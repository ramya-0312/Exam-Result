
<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<div class="full vh-100">
<div class = "background" style="background-color:#c7eceb">
<div class="container mt-0">
  <div class="text-center mb-4">
    <h3 class="fw-bold text-uppercase">Welcome to Office of the Controller of Examination</h3>
    <h5 class="text-center text-muted">Pre-Examination Monitoring System</h5>
  </div>
<!-- Spinner Section -->
<!-- Spinner Section -->
 <div class="rolling "style="background-color:#c7eceb">
<div *ngIf="loadingResult" class="text-center mt-5">
  <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;background-color: #c7eceb;" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
  <p class="mt-2 fw-semibold">Fetching Result...</p>
</div>
</div>


    <!-- Result Content (visible after 5 seconds) -->
    <div *ngIf="!loadingResult">
      <div class="border p-4 rounded mb-4 bg-light shadow-sm">
        <div class="text-end mb-3">
          <button class="btn btn-outline-warning" (click)="goToRevaluation()">Revaluation Request</button>
        </div>
        <div class="row">
          <div class="col-md-6"><strong>Name:</strong> {{ student?.name }}</div>
          <div class="col-md-6"><strong>Register Number:</strong> {{ student?.registered }}</div>
          <div class="col-md-6"><strong>Department:</strong> {{ student?.department }}</div>
          <div class="col-md-6"><strong>Semester:</strong> {{ semester }}</div>
        </div>
      </div>

      <div class="table-responsive">
        <table class="table table-bordered text-center align-middle shadow-sm">
          <thead class="table-dark">
            <tr>
              <th>Subject</th>
              <th>Marks</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let subject of student?.marks">
              <td>{{ subject.name }}</td>
              <td>{{ subject.marks }}</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="mt-4 p-4 rounded text-center shadow-sm"
          [ngClass]="{
            'bg-success text-white': student?.result === 'Pass',
            'bg-danger text-white': student?.result === 'Fail'
          }">
        <h5>Grade: {{ student?.total }}</h5>
        <!--<h5>CGPA: {{ cgpa }}</h5>-->
        <h5>Result: {{ student?.result }}</h5>
      </div>
      <div class="text-center mt-4">
        <button class="btn btn-secondary me-2" (click)="goHome()">Back</button>
        <button class="btn btn-primary" (click)="printPage()">Print</button>
      </div>


    </div>
  </div>
<!-- Logout Confirmation Modal -->
<div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="logoutModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" style="max-width: 380px;"> <!-- smaller width -->
    <div class="modal-content border-0 shadow-lg rounded-4" style="padding: 10px;">
      <div class="modal-header bg-danger text-white py-2 px-3 rounded-top-4">
        <h6 class="modal-title mb-0" id="logoutModalLabel">Confirm Logout</h6>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close" style="font-size: 0.8rem;"></button>
      </div>
      <div class="modal-body text-center py-3 px-2">
        <i class="bi bi-exclamation-triangle-fill text-warning mb-2" style="font-size: 1.5rem;"></i>
        <p class="mb-1 fw-semibold" style="font-size: 0.95rem;">Are you sure you want to logout?</p>
        <p class="text-muted small mb-0" style="font-size: 0.8rem;">You’ll be redirected to login page.</p>
      </div>
      <div class="modal-footer justify-content-center border-0 pt-1 pb-3">
        <button type="button" class="btn btn-sm btn-secondary px-3" data-bs-dismiss="modal">No</button>
        <button type="button" class="btn btn-sm btn-danger px-3" (click)="confirmLogout()" data-bs-dismiss="modal">Yes</button>
      </div>
    </div>
  </div>
</div>

</div>
</div>

